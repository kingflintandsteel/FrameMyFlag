import{_ as y,o,d as u,e as i,f as h,t as p,p as b,g}from"./index-7e403f5f.js";/*!
 * paypal-js v7.0.2 (2023-08-26T19:26:29.277Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(e,t){var s=document.querySelector('script[src="'.concat(e,'"]'));if(s===null)return null;var r=f(e,t),a=s.cloneNode();if(delete a.dataset.uidAuto,Object.keys(a.dataset).length!==Object.keys(r.dataset).length)return null;var n=!0;return Object.keys(a.dataset).forEach(function(c){a.dataset[c]!==r.dataset[c]&&(n=!1)}),n?s:null}function S(e){var t=e.url,s=e.attributes,r=e.onSuccess,a=e.onError,n=f(t,s);n.onerror=a,n.onload=r,document.head.insertBefore(n,document.head.firstElementChild)}function F(e){var t="https://www.paypal.com/sdk/js";e.sdkBaseUrl&&(t=e.sdkBaseUrl,delete e.sdkBaseUrl);var s=e,r=Object.keys(s).filter(function(c){return typeof s[c]<"u"&&s[c]!==null&&s[c]!==""}).reduce(function(c,l){var m=s[l].toString();return l=k(l),l.substring(0,4)==="data"?c.dataAttributes[l]=m:c.queryParams[l]=m,c},{queryParams:{},dataAttributes:{}}),a=r.queryParams,n=r.dataAttributes;return a["merchant-id"]&&a["merchant-id"].indexOf(",")!==-1&&(n["data-merchant-id"]=a["merchant-id"],a["merchant-id"]="*"),{url:"".concat(t,"?").concat(I(a)),dataAttributes:n}}function k(e){var t=function(s,r){return(r?"-":"")+s.toLowerCase()};return e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,t)}function I(e){var t="";return Object.keys(e).forEach(function(s){t.length!==0&&(t+="&"),t+=s+"="+e[s]}),t}function f(e,t){t===void 0&&(t={});var s=document.createElement("script");return s.src=e,Object.keys(t).forEach(function(r){s.setAttribute(r,t[r]),r==="data-csp-nonce"&&s.setAttribute("nonce",t["data-csp-nonce"])}),s}function E(e,t){if(t===void 0&&(t=Promise),v(e,t),typeof document>"u")return t.resolve(null);var s=F(e),r=s.url,a=s.dataAttributes,n=a["data-namespace"]||"paypal",c=_(n);return w(r,a)&&c?t.resolve(c):A({url:r,attributes:a},t).then(function(){var l=_(n);if(l)return l;throw new Error("The window.".concat(n," global variable is not available."))})}function A(e,t){t===void 0&&(t=Promise),v(e,t);var s=e.url,r=e.attributes;if(typeof s!="string"||s.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new t(function(a,n){if(typeof document>"u")return a();S({url:s,attributes:r,onSuccess:function(){return a()},onError:function(){var c=new Error('The script "'.concat(s,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return n(c)}})})}function _(e){return window[e]}function v(e,t){if(typeof e!="object"||e===null)throw new Error("Expected an options object.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected PromisePonyfill to be a function.")}const D={name:"checkoutPage",data:function(){return{type:"",size:"",frame:"",customFramed:!1,quantity:0,price:0,onSale:!1,paid:!1,cart:!1,image:"",discounts:{design:"FlagV1P",firstResponder:"Fl4gTYFYS"},appliedDiscount:null,discountAmount:null}},methods:{discountCheckChange:function(e){e.preventDefault(),this.discounts[e.target.value]?(document.getElementById("valid").classList.remove("hidden"),document.getElementById("invalid").classList.add("hidden"),this.onSale||(this.appliedDiscount=this.discounts[e.target.value],this.discountAmount=this.calculateDiscount())):(document.getElementById("valid").classList.add("hidden"),document.getElementById("invalid").classList.remove("hidden"),this.appliedDiscount=null,this.discountAmount=null)},calculateDiscount:function(){return this.appliedDiscount?this.price*.15:null},createPuchaceUnits:function(){var e=[],t=this.createItems(),s=this.createAmount();return e.push({items:t,amount:s}),e},createItem:function(e,t,s){var r={name:e,description:e,quantity:t,unit_amount:{currency_code:"USD",value:s}};return r},createItems:function(){var e=[],t=this.price;return this.customFramed&&(t=t-100),e.push(this.createItem(this.type,this.quantity,t)),e.push(this.createItem(this.size,1,0)),e.push(this.createItem(this.frame,1,0)),this.type=="FrameYourFlag"&&(this.customFramed?e.push(this.createItem("Custom Framed",1,100)):e.push(this.createItem("Not Custom Framed",1,0))),e},createAmount:function(){var e=this.price,t=this.calculateDiscount();if(t){var s=e-t;return{currency_code:"USD",value:s,breakdown:{item_total:{currency_code:"USD",value:e},discount:{currency_code:"USD",value:t}}}}else return{currency_code:"USD",value:e,breakdown:{item_total:{currency_code:"USD",value:e}}}},createOrder:function(e,t){var s=this.createPuchaceUnits();return t.order.create({purchase_units:s})},onApprove:function(e,t){return t.order.capture().then(()=>{this.paid=!0,sessionStorage.removeItem("cart"),setTimeout(()=>{this.$router.push("/")},"4000")})}},mounted(){if(sessionStorage.cart){this.cart=!0;var e=JSON.parse(sessionStorage.cart);this.type=e.type,this.size=e.size,this.frame=e.frame,this.customFramed=!!e.customFramed,this.quantity=e.quantity,this.price=e.price,this.onSale=!!e.onSale,this.customFramed&&(this.price=this.price+100),this.image=e.image,E({"client-id":"AeCPYoUvOvaR8F64yFyFxkVm1zKrr5FnkTJy_-136M78qBdsuk8sK7rcjc0EnX9pILc0igF7lWbrK7ew","disable-funding":"paylater",components:"buttons"}).then(t=>{t.Buttons({createOrder:this.createOrder,onApprove:this.onApprove}).render("#paypal-button-container")})}else this.$router.push("/")}},d=e=>(b("data-v-22c7dba2"),e=e(),g(),e),C={key:0,class:"paymentDiv"},T={key:0,class:"notPaid"},q={class:"buttons"},x={class:"discount"},B=d(()=>i("label",{for:"discountCode",class:"label"},"Discount Code:",-1)),O=d(()=>i("span",{class:"valid hidden",id:"valid"},"Discount Code Valid",-1)),U=d(()=>i("span",{class:"invalid hidden",id:"invalid"},"Discount Code Invalid",-1)),j={key:0,class:"discountSaleDiscliamer"},Y=d(()=>i("div",{id:"paypal-button-container"},null,-1)),z={class:"previewDiv"},L={class:"preview"},N=d(()=>i("p",{class:"previewTitle"},"Order Preview",-1)),$=["src"],V={class:"previewItem"},W=d(()=>i("p",{class:"label"},"Flag Type: ",-1)),K={class:"labeled"},J={class:"previewItem"},M={key:0,class:"label"},P={key:1,class:"label"},Q={class:"labeled"},R={key:0,class:"previewItem"},Z=d(()=>i("p",{class:"label"},"Frame Type: ",-1)),H={class:"labeled"},X={key:1,class:"previewItem"},G=d(()=>i("p",{class:"label"},"Custom Framing: ",-1)),ee={key:0,class:"labeled"},te={key:1,class:"labeled"},se={key:2,class:"previewItem"},ie=d(()=>i("p",{class:"discountLabel"},"Discount: ",-1)),re={class:"labeled"},ae={class:"quantity"},ne=d(()=>i("p",{class:"quantityLabel"},"Quantity: ",-1)),ce={class:"labeled"},oe={class:"totalPrice"},ue=d(()=>i("p",{class:"priceLabel"},"Total Price: ",-1)),de={key:0,class:"labeled"},le={key:1,class:"labeled"},he={key:1},pe=d(()=>i("p",{class:"thankYou"},"Thank you for your purchase",-1)),me=d(()=>i("p",{class:"redirect"},"You will now be redirected to the home page",-1)),_e=[pe,me];function fe(e,t,s,r,a,n){return this.cart?(o(),u("div",C,[this.paid?h("",!0):(o(),u("table",T,[i("td",q,[i("div",x,[B,i("input",{id:"discountCode",type:"text",class:"input",onChange:t[0]||(t[0]=c=>n.discountCheckChange(c))},null,32),O,U,this.onSale?(o(),u("p",j,"This Item is currently on sale, discount code will not apply to this item")):h("",!0)]),Y]),i("td",z,[i("div",L,[N,i("img",{src:this.image,class:"previewImage"},null,8,$),i("div",V,[W,i("p",K,p(this.type),1)]),i("div",J,[this.type!="FrameYourFlag"?(o(),u("p",M,"Flag Size: ")):h("",!0),this.type=="FrameYourFlag"?(o(),u("p",P,"Frame Size: ")):h("",!0),i("p",Q,p(this.size),1)]),this.type!="Unframed"?(o(),u("div",R,[Z,i("p",H,p(this.frame),1)])):h("",!0),this.type=="FrameYourFlag"?(o(),u("div",X,[G,this.customFramed?(o(),u("p",ee,"Yes")):(o(),u("p",te,"No"))])):h("",!0),this.appliedDiscount!=null?(o(),u("div",se,[ie,i("p",re,"$"+p(this.discountAmount),1)])):h("",!0),i("div",ae,[ne,i("p",ce,p(this.quantity),1)]),i("div",oe,[ue,this.discountAmount?(o(),u("p",de,"$"+p(this.price-this.discountAmount),1)):(o(),u("p",le,"$"+p(this.price),1))])])])])),this.paid?(o(),u("div",he,_e)):h("",!0)])):h("",!0)}const ye=y(D,[["render",fe],["__scopeId","data-v-22c7dba2"]]);export{ye as default};
